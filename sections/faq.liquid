<div class="full-bleed relative min-h-[700px] overflow-hidden flex items-center py-20">
    
    <!-- Imagen de fondo -->
    <div class="absolute inset-0 z-0">
        {% if section.settings.background_image %}
            <img src="{{ section.settings.background_image | image_url: width: 2000 }}"
                 class="min-w-full min-h-full object-cover"
                 width="{{ section.settings.background_image.width }}"
                 height="{{ section.settings.background_image.height }}"
                 alt="FAQ Background">
        {% else %}
            <div class="w-full h-full bg-gray-200"></div>
        {% endif %}
        <div class="absolute inset-0 bg-black/20"></div>
    </div>

    <!-- Contenido -->
    <div class="relative z-10 w-full max-w-7xl mx-auto px-5 lg:px-20">
        
        <div class="pb-10">
            <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white">
                {{ section.settings.title }}
            </h2>
        </div>

        <div class="flex flex-col lg:flex-row gap-8 lg:gap-12">
            
            <!-- Lado izquierdo: Categorías -->
            <div class="w-full lg:w-1/3 flex flex-col gap-4">
                {% for block in section.blocks %}
                    <button class="faq-category-btn text-left px-6 py-4 rounded-xl transition-all duration-300 text-lg font-semibold
                                   {% if forloop.first %}bg-white text-black{% else %}bg-white/30 text-white hover:bg-white/50{% endif %}"
                            data-category="{{ block.id }}"
                            {{ block.shopify_attributes }}>
                        {{ block.settings.category_name }}
                    </button>
                {% endfor %}
            </div>

            <!-- Lado derecho: Preguntas y respuestas -->
            <div class="w-full lg:w-2/3">
                {% for block in section.blocks %}
                    <div class="faq-content bg-white rounded-2xl p-6 md:p-8 {% unless forloop.first %}hidden{% endunless %}"
                         data-content="{{ block.id }}">
                        
                        {% if block.settings.question_1 != blank %}
                            <details class="faq-item group mb-4">
                                <summary class="flex justify-between items-center cursor-pointer list-none py-4 border-b border-gray-200">
                                    <span class="text-lg font-semibold text-gray-900 pr-4">
                                        {{ block.settings.question_1 }}
                                    </span>
                                    <span class="text-2xl transform transition-transform duration-300 group-open:rotate-180">
                                        ›
                                    </span>
                                </summary>
                                <div class="pt-4 pb-2 text-gray-600 leading-relaxed">
                                    {{ block.settings.answer_1 }}
                                </div>
                            </details>
                        {% endif %}

                        {% if block.settings.question_2 != blank %}
                            <details class="faq-item group mb-4">
                                <summary class="flex justify-between items-center cursor-pointer list-none py-4 border-b border-gray-200">
                                    <span class="text-lg font-semibold text-gray-900 pr-4">
                                        {{ block.settings.question_2 }}
                                    </span>
                                    <span class="text-2xl transform transition-transform duration-300 group-open:rotate-180">
                                        ›
                                    </span>
                                </summary>
                                <div class="pt-4 pb-2 text-gray-600 leading-relaxed">
                                    {{ block.settings.answer_2 }}
                                </div>
                            </details>
                        {% endif %}

                        {% if block.settings.question_3 != blank %}
                            <details class="faq-item group mb-4">
                                <summary class="flex justify-between items-center cursor-pointer list-none py-4 border-b border-gray-200">
                                    <span class="text-lg font-semibold text-gray-900 pr-4">
                                        {{ block.settings.question_3 }}
                                    </span>
                                    <span class="text-2xl transform transition-transform duration-300 group-open:rotate-180">
                                        ›
                                    </span>
                                </summary>
                                <div class="pt-4 pb-2 text-gray-600 leading-relaxed">
                                    {{ block.settings.answer_3 }}
                                </div>
                            </details>
                        {% endif %}

                        {% if block.settings.question_4 != blank %}
                            <details class="faq-item group mb-4">
                                <summary class="flex justify-between items-center cursor-pointer list-none py-4 border-b border-gray-200">
                                    <span class="text-lg font-semibold text-gray-900 pr-4">
                                        {{ block.settings.question_4 }}
                                    </span>
                                    <span class="text-2xl transform transition-transform duration-300 group-open:rotate-180">
                                        ›
                                    </span>
                                </summary>
                                <div class="pt-4 pb-2 text-gray-600 leading-relaxed">
                                    {{ block.settings.answer_4 }}
                                </div>
                            </details>
                        {% endif %}

                        {% if block.settings.question_5 != blank %}
                            <details class="faq-item group mb-4">
                                <summary class="flex justify-between items-center cursor-pointer list-none py-4 border-b border-gray-200">
                                    <span class="text-lg font-semibold text-gray-900 pr-4">
                                        {{ block.settings.question_5 }}
                                    </span>
                                    <span class="text-2xl transform transition-transform duration-300 group-open:rotate-180">
                                        ›
                                    </span>
                                </summary>
                                <div class="pt-4 pb-2 text-gray-600 leading-relaxed">
                                    {{ block.settings.answer_5 }}
                                </div>
                            </details>
                        {% endif %}

                    </div>
                {% endfor %}
            </div>

        </div>

    </div>

</div>

<style>
.full-bleed {
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}

.faq-item[open] summary span:last-child {
  transform: rotate(90deg);
}

.faq-item summary::-webkit-details-marker {
  display: none;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const categoryBtns = document.querySelectorAll(".faq-category-btn");
    const faqContents = document.querySelectorAll(".faq-content");

    categoryBtns.forEach(btn => {
        btn.addEventListener("click", function () {
            const categoryId = this.dataset.category;

            // Cambiar estilos de botones
            categoryBtns.forEach(b => {
                b.classList.remove("bg-white", "text-black");
                b.classList.add("bg-white/30", "text-white");
            });

            this.classList.remove("bg-white/30", "text-white");
            this.classList.add("bg-white", "text-black");

            // Cambiar contenido visible con fade
            faqContents.forEach(content => {
                if (content.dataset.content === categoryId) {
                    content.classList.remove("hidden");
                } else {
                    content.classList.add("hidden");
                }
            });
        });
    });
});
</script>

{% schema %}
{
  "name": "FAQ Section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "FAQ"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    }
  ],
  "blocks": [
    {
      "type": "faq_category",
      "name": "FAQ Category",
      "limit": 10,
      "settings": [
        {
          "type": "text",
          "id": "category_name",
          "label": "Category Name",
          "default": "Returns & Refunds"
        },
        {
          "type": "text",
          "id": "question_1",
          "label": "Question 1"
        },
        {
          "type": "richtext",
          "id": "answer_1",
          "label": "Answer 1"
        },
        {
          "type": "text",
          "id": "question_2",
          "label": "Question 2"
        },
        {
          "type": "richtext",
          "id": "answer_2",
          "label": "Answer 2"
        },
        {
          "type": "text",
          "id": "question_3",
          "label": "Question 3"
        },
        {
          "type": "richtext",
          "id": "answer_3",
          "label": "Answer 3"
        },
        {
          "type": "text",
          "id": "question_4",
          "label": "Question 4"
        },
        {
          "type": "richtext",
          "id": "answer_4",
          "label": "Answer 4"
        },
        {
          "type": "text",
          "id": "question_5",
          "label": "Question 5"
        },
        {
          "type": "richtext",
          "id": "answer_5",
          "label": "Answer 5"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ Section",
      "category": "main",
      "blocks": [
        {
          "type": "faq_category",
          "settings": {
            "category_name": "Returns & Refunds"
          }
        },
        {
          "type": "faq_category",
          "settings": {
            "category_name": "Delivery"
          }
        },
        {
          "type": "faq_category",
          "settings": {
            "category_name": "Order"
          }
        }
      ]
    }
  ]
}
{% endschema %}